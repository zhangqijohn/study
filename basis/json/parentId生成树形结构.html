<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
</head>
<body>
<script>
  var arr = [
      {
          "name": "组织架构管理",
          "desc": "",
          "appId": "permit",
          "parentId": "6659cfac-8bac-464e-9783-e7b81341e918",
          "type": 1,
          "icon": "",
          "module": {},
          "sortIndex": 0,
          "enable": true,
          "createTime": "2019-06-17T11:49:29.639Z",
          "updateTime": "2019-12-16T10:04:05.429Z",
          "id": "15c7dd00-7dd2-4a64-9c99-15e86f9d8db5"
      },
      {
          "name": "权限管理",
          "desc": "",
          "appId": "permit",
          "parentId": "ad2a3bcb-918c-430a-af5d-62a23d42c67a",
          "type": 1,
          "icon": "",
          "module": {},
          "sortIndex": 0,
          "enable": true,
          "createTime": "2019-06-17T11:51:49.294Z",
          "updateTime": "2019-12-16T10:04:56.355Z",
          "id": "ffdf56b1-98fd-47fd-9a2f-09c65e387ec5"
      },
      {
          "name": "操作日志",
          "desc": "",
          "appId": "permit",
          "parentId": "0b853215-7f79-41bc-85cf-f46a530b6424",
          "type": 1,
          "icon": "",
          "module": {},
          "sortIndex": 0,
          "enable": true,
          "createTime": "2019-06-17T11:52:28.291Z",
          "updateTime": "2019-12-16T10:05:13.563Z",
          "id": "acede0ad-7b03-49c5-bfb7-c63c349255e5"
      },
      {
          "name": "组织管理",
          "desc": "",
          "appId": "permit",
          "parentId": "00000000-0000-0000-0000-000000000000",
          "type": 1,
          "icon": "",
          "sortIndex": 1,
          "enable": true,
          "createTime": "2019-06-17T11:48:39.472Z",
          "updateTime": "2019-10-09T09:20:13.153Z",
          "id": "6659cfac-8bac-464e-9783-e7b81341e918"
      },
      {
          "name": "业务群组管理",
          "desc": "",
          "appId": "permit",
          "parentId": "6659cfac-8bac-464e-9783-e7b81341e918",
          "type": 1,
          "icon": "",
          "module": {},
          "sortIndex": 1,
          "enable": true,
          "createTime": "2019-06-17T11:50:27.702Z",
          "updateTime": "2019-12-16T10:04:23.655Z",
          "id": "e6a7cc53-cb10-4b5c-9899-9a7c05e367cf"
      },
      {
          "name": "API管理",
          "desc": "",
          "appId": "permit",
          "parentId": "ad2a3bcb-918c-430a-af5d-62a23d42c67a",
          "type": 1,
          "icon": "",
          "module": {},
          "sortIndex": 1,
          "enable": true,
          "createTime": "2019-06-17T11:52:10.156Z",
          "updateTime": "2019-12-16T10:05:02.754Z",
          "id": "057c202a-83c0-466b-a782-7c5e33488837"
      },
      {
          "name": "用户管理",
          "desc": "",
          "appId": "permit",
          "parentId": "6659cfac-8bac-464e-9783-e7b81341e918",
          "type": 1,
          "icon": "",
          "module": {
              "combineType": "app",
              "combineDataList": [
                  {
                      "id": "permit",
                      "name": "授权管理系统"
                  },
                  {
                      "id": "xhero",
                      "name": "位面战争管理系统"
                  },
                  {
                      "id": "ops",
                      "name": "运维管理系统"
                  },
                  {
                      "id": "activity-mgmt",
                      "name": "活动管理系统（游戏内）"
                  },
                  {
                      "id": "chat",
                      "name": "聊天监控管理系统"
                  },
                  {
                      "id": "advertisement",
                      "name": "广告营销系统"
                  },
                  {
                      "id": "ggbs",
                      "name": "通用游戏平台"
                  }
              ],
              "combinePermissionList": [
                  "688b3b89-e57e-4073-a08f-d4820dc1fe7a",
                  "38b8ae00-f3ff-4640-93ee-97b445b8b880",
                  "2802ea0a-13fd-44f0-9bfd-1f4b06568704"
              ],
              "path": "/organize/user",
              "permissionList": []
          },
          "sortIndex": 2,
          "enable": true,
          "createTime": "2019-06-17T11:51:08.483Z",
          "updateTime": "2019-12-16T10:04:32.046Z",
          "id": "abf2e569-dbe8-4a53-8ab9-0067a39aa2dd"
      },
      {
          "name": "系统管理",
          "desc": "",
          "appId": "permit",
          "parentId": "00000000-0000-0000-0000-000000000000",
          "type": 1,
          "icon": "",
          "sortIndex": 15,
          "enable": true,
          "createTime": "2019-06-17T11:48:48.211Z",
          "updateTime": "2019-10-09T09:20:02.916Z",
          "id": "ad2a3bcb-918c-430a-af5d-62a23d42c67a"
      },
      {
          "name": "日志管理",
          "desc": "",
          "appId": "permit",
          "parentId": "00000000-0000-0000-0000-000000000000",
          "type": 1,
          "icon": "",
          "sortIndex": 20,
          "enable": true,
          "createTime": "2019-06-17T11:48:53.889Z",
          "updateTime": "2019-07-03T11:52:40.111Z",
          "id": "0b853215-7f79-41bc-85cf-f46a530b6424"
      }
  ]

  function toTree(arr) {
      // 这种适用于顶层全部是00000000-0000-0000-0000-000000000000
      // 生成对象{6659cfac-8bac-464e-9783-e7b81341e918：{ "name": "组织管理", "id": "6659cfac-8bac-464e-9783-e7b81341e918","parentId": "00000000-0000-0000-0000-000000000000",...}...}
      let firstLevelObj = {}  // 保存顶级
      for(let i of arr){
          if(i.parentId === "00000000-0000-0000-0000-000000000000"){
              firstLevelObj[i.id] = i
          }
      }
      for(let i of arr){
          if(firstLevelObj.hasOwnProperty(i.parentId)){
              if(!firstLevelObj[i.parentId].children){
                  firstLevelObj[i.parentId].children = []
              }
              firstLevelObj[i.parentId].children.push(i)
          }
      }
      return Object.values(firstLevelObj)
  }
// toTree(arr)

  console.log(toTree(arr))


</script>

</body>
</html>
