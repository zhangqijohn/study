<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="jquery-1.11.1.js"></script>
    <style>
        .ul {width: 800px;margin: 0 auto;}
        li{width: 160px;height: 160px;float: left;border: 1px solid #0a8cde;list-style: none;margin: 5px;position: relative;overflow: hidden}
        div{width: 100%;height: 100%;position: absolute;left: -100%;top:0;background: rgba(0,0,0,.5)}
        div.trans{transition: all .3s;}

    </style>
</head>
<body>
<ul>
    <li><div></div></li><li><div></div></li><li><div></div></li><li><div></div></li>
    <li><div></div></li><li><div></div></li><li><div></div></li><li><div></div></li>
    <li><div></div></li><li><div></div></li><li><div></div></li><li><div></div></li>
</ul>

<script>
    (function ($) {
          function isHidden( elem, el ) {
            // isHidden might be called from jQuery#filter function;
            // in that case, element will be second argument
            elem = el || elem;
            return jQuery.css( elem, "display" ) === "none" || !jQuery.contains( elem.ownerDocument, elem );
        };
        function showHide( elements, show ) {
            var display, elem, hidden,
                values = [],
                index = 0,
                length = elements.length;

            for ( ; index < length; index++ ) {
                elem = elements[ index ];
                if ( !elem.style ) {
                    continue;
                }

                values[ index ] = jQuery._data( elem, "olddisplay" );
                display = elem.style.display;
                if ( show ) {
                    // Reset the inline display of this element to learn if it is
                    // being hidden by cascaded rules or not
                    if ( !values[ index ] && display === "none" ) {
                        elem.style.display = "";
                    }

                    // Set elements which have been overridden with display: none
                    // in a stylesheet to whatever the default browser style is
                    // for such an element
                    if ( elem.style.display === "" && isHidden( elem ) ) {
                        values[ index ] = jQuery._data( elem, "olddisplay", defaultDisplay(elem.nodeName) );
                    }
                } else {
                    hidden = isHidden( elem );

                    if ( display && display !== "none" || !hidden ) {
                        jQuery._data( elem, "olddisplay", hidden ? display : jQuery.css( elem, "display" ) );
                    }
                }
            }

            // Set the display of most of the elements in a second loop
            // to avoid the constant reflow
            for ( index = 0; index < length; index++ ) {
                elem = elements[ index ];
                if ( !elem.style ) {
                    continue;
                }
                if ( !show || elem.style.display === "none" || elem.style.display === "" ) {
                    elem.style.display = show ? values[ index ] || "" : "none";
                }
            }

            return elements;
        }

        $.extend({
            test2:function () {
                alert("这是我测试的方775法3哈");
            }
        })
        jQuery.fn.extend({
            test2 : function () {
                alert("这是我的方法3的");
                $.fn.test2.sn.add();
            },
            mhide :function () {
                return showHide(this)
            }

        })
    })(jQuery)

    function calculate(element, ev) {
        var lanren = {0:{top:'-100%',left:'0'},1:{top:'0',left:'100%'},2:{top:'100%',left:'0'},3:{top:'0',left:'-100%'}};
        var w = element.offsetWidth,
            h = element.offsetHeight,
            x = (ev.pageX - element.offsetLeft - (w / 2) * (w > h ? (h / w) : 1)),
            y = (ev.pageY - element.offsetTop - (h / 2) * (h > w ? (w / h) : 1)),
            d = Math.round(Math.atan2(y, x) / 1.57079633 + 5) % 4;
            return lanren[d] //d = 0为top 1为right 2为bottom 3为left
    };
    $("li").hover(function (e) {
        var $content = $(this).find('div');
        //调整位置
        $content.removeClass('trans').css(calculate(this,e));
        //reflow
        $content[0].offsetWidth;
        //启用过渡
        $content.addClass('trans').css({left: '0', top: '0'});
    },function (e) {
        $(this).find('div').css(calculate(this,e));
    })
</script>

</body>
</html>
